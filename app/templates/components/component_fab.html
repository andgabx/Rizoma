<!-- PROCURE A FUNÇÃO get_fab_content NAS VIEWS PARA ENTENDER COMO USAR ESTE COMPONENTE-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- Anime.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <title>Document</title>
</head>
<body>
    <!-- FAB -->
    <button id="fab-button" class="fixed right-8 bottom-24 bg-gray-500 text-white p-4 rounded-full shadow-lg focus:outline-none w-16 h-16">
        <i id="fab-icon" class="bi bi-plus-lg text-2xl"></i>
    </button>

    <!-- OPTIONS -->
    <div id="fab-behavior">

        {% if page %}
            <script>
                window.location.href = "{% url page %}";
            </script>
        {% elif options %}
            <div id="fab-menu" class="fixed right-4 bottom-44 w-44 bg-gray-500 rounded-lg p-1 hidden">
                <div class="p-2">
                    <ul class="space-y-3">
                        {% for option in options %}
                        <li class="bg-slate rounded-xl py-1 flex items-center gap-4">
                            <i class="bi {{ option.icon }} text-white text-2xl"></i>
                            <a href="{% url option.page %}" class="text-white font-bold text-md">
                                {{ option.name }}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endif %}
    </div>

    <script>
        const fab_button = document.getElementById("fab-button");
        const fab_icon = document.getElementById("fab-icon");

        function animateFabClick() {
            anime({
                targets: fab_button,
                scale: [1, 1.2, 1],
                duration: 200,
                easing: 'easeInOutQuad'
            });
        }

        function togglePopupMenu() {
            const popup_menu = document.getElementById("fab-menu");

            if (popup_menu.classList.contains("hidden")) {
                popup_menu.classList.remove("hidden");

                anime({
                    targets: "#fab-menu",
                    opacity: [0, 1],
                    translateY: [20, 0],
                    duration: 500,
                    easing: "easeOutExpo"
                });

                fab_icon.classList.replace("bi-plus-lg", "bi-x-lg");
            } else {
                anime({
                    targets: "#fab-menu",
                    opacity: [1, 0],
                    translateY: [0, 20],
                    duration: 200,
                    easing: "easeInExpo",
                    complete: function () {
                        popup_menu.classList.add("hidden");
                    }
                });

                fab_icon.classList.replace("bi-x-lg", "bi-plus-lg");
            }
        }

        fab_button.addEventListener("click", () => {
            animateFabClick();
            togglePopupMenu();
        });
    </script>
</body>
</html>
